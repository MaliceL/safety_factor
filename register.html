<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width. initial-scale=1.0">
        <title>Safety Factor</title>
        <link rel="shortcut icon" href="logo.png" type="image/x-icon">
        <link rel="manifest" href="manifest.json">    
    </head>
    <body>
        <img src="logo.png" style="margin-left:auto ; margin-right:auto ; display:block" onclick="showdata('tag')">

        <a href="index.html">Back</a>

        <form id="formular">
            <label for="username">Username</label>
            <input type="text" id="username"/>
            <label for="factor1">Faktor 1</label>
            <input type="checkbox" id="factor1"/>
            <label for="factor2">Faktor 2</label>
            <input type="checkbox" id="factor2"/>
            <label for="factor3">Faktor 3</label>
            <input type="checkbox" id="factor3"/>
            <label for="factor4">Faktor 4</label>
            <input type="checkbox" id="factor4"/>
            <br>
            <button type="submit" onclick="savedata()">Erstellen</button>
        </form>

        <br><br>

        <script>
            function savedata() {
                //Database Structure
                var user = {};
                var factor1 = {};
                var factor2 = {};
                var factor3 = {};
                var factor4 = {};
                var password = {};

                //Fill Tables
                user["user001"] = {id: 001, username: document.getElementById('username').value, f1: document.getElementById('factor1').checked, f2: document.getElementById('factor2').checked, f3: document.getElementById('factor3').checked, f4: document.getElementById('factor4').checked};

                factor1["fac1_001"] = {id: 1, userid: 001, data: "password"};
                factor2["fac2_001"] = {id: 1, userid: 001, data: "placeholder2"};
                factor3["fac3_001"] = {id: 1, userid: 001, data: "31524"};
                factor4["fac4_001"] = {id: 1, userid: 001, data: "placeholder4"};

                password["pw1_001"] = {id: 1, userid: 001, name: "google", password: "googlepw"};
                password["pw2_001"] = {id: 2, userid: 001, name: "yahoo", password: "yahoopw"};
                password["pw3_001"] = {id: 3, userid: 001, name: "amazon", password: "amazonpw"};

                //Save Data
                try {
                    localStorage["users"] = JSON.stringify(user);
                    localStorage["factor1"] = JSON.stringify(factor1);
                    localStorage["factor2"] = JSON.stringify(factor2);
                    localStorage["factor3"] = JSON.stringify(factor3);
                    localStorage["factor4"] = JSON.stringify(factor4);
                    localStorage["passwords"] = JSON.stringify(password);
                } catch (e) {
                    alert("Error when writing to Local Storage\n" + e);
                }
            }
            //Stop Context Menu
            document.addEventListener("contextmenu", (e) => {
                e.preventDefault();
            }, false);
            /*Stop inspection
            document.addEventListener("keydown", (e) => {
                if (e.ctrlKey || e.keyCode==123) {
                    e.stopPropagation();
                    e.preventDefault();
                }
            });
            */
        </script>
    </body>
</html>